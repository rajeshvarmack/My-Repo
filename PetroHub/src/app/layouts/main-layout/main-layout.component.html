<!-- eslint-disable @angular-eslint/template/no-call-expression -->
<!-- filepath: c:\Rajesh\My Repo\PetroHub\src\app\layouts\main-layout\main-layout.component.html -->
<div class="min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-800">
  <!-- Sidebar -->
  <div
    [ngClass]="sidebarClasses()"
    (mouseenter)="onSidebarMouseEnter()"
    (mouseleave)="onSidebarMouseLeave()"
    (click)="$event.stopPropagation()"
    class="fixed top-0 left-0 h-full bg-gradient-to-b from-slate-800 to-slate-900 border-r border-slate-700/50 shadow-xl transition-all duration-300 z-50"
  >
    <!-- Logo -->
    <div
      class="flex items-center justify-between h-16 px-4 bg-gradient-to-r from-blue-600 to-blue-700 border-b border-blue-500/30"
    >
      <div class="flex items-center gap-3">
        <div class="w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center">
          <fa-icon [icon]="faGasPump" class="text-white"></fa-icon>
        </div>
        <span
          class="text-xl font-bold text-white transition-opacity duration-300"
          [class.opacity-0]="!shouldShowText()"
          [class.sr-only]="!shouldShowText()"
          >PetroHub</span
        >
      </div>
      <!-- Desktop Toggle Button -->
      <button
        (click)="toggleSidebarMinimized(); $event.stopPropagation()"
        class="p-1.5 text-white/80 hover:text-white hover:bg-white/10 rounded-lg transition-colors lg:block hidden z-10"
        title="Toggle Sidebar"
        type="button"
      >
        <fa-icon [icon]="isSidebarMinimized() ? faChevronRight : faChevronLeft"></fa-icon>
      </button>
    </div>

    <!-- User Profile -->
    <div class="p-4 border-b border-slate-700/50">
      <div class="flex items-center gap-3 transition-all duration-300" [class.justify-center]="!shouldShowText()">
        <div class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center flex-shrink-0">
          <fa-icon [icon]="faUser" class="text-white"></fa-icon>
        </div>
        <div
          class="min-w-0 transition-opacity duration-300"
          [class.opacity-0]="!shouldShowText()"
          [class.sr-only]="!shouldShowText()"
        >
          <p class="text-white font-medium truncate">Admin User</p>
          <p class="text-slate-400 text-sm truncate">admin&#64;petrohub.com</p>
        </div>
      </div>
    </div>

    <!-- Navigation -->
    <nav class="flex-1 p-4">
      <div class="space-y-2">
        <!-- Dashboard -->
        <a
          routerLink="/dashboard"
          routerLinkActive="bg-blue-600/20 text-blue-300 border-blue-500/30"
          class="flex items-center px-3 py-2.5 text-slate-300 hover:text-white hover:bg-slate-700/50 rounded-lg transition-all duration-200 border border-transparent group relative"
          [class.gap-3]="shouldShowText()"
          [class.justify-center]="!shouldShowText()"
        >
          <fa-icon [icon]="faHome" class="text-lg flex-shrink-0"></fa-icon>
          <span
            class="font-medium transition-opacity duration-300"
            [class.opacity-0]="!shouldShowText()"
            [class.sr-only]="!shouldShowText()"
            >Dashboard</span
          >
          <!-- Tooltip for minimized state -->
          <div
            class="absolute left-full ml-2 px-2 py-1 bg-slate-900 border border-slate-600 text-white text-sm rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10"
            [class.hidden]="shouldShowText()"
          >
            Dashboard
          </div>
        </a>

        <!-- Station Management -->
        <a
          routerLink="/stations"
          routerLinkActive="bg-blue-600/20 text-blue-300 border-blue-500/30"
          class="flex items-center px-3 py-2.5 text-slate-300 hover:text-white hover:bg-slate-700/50 rounded-lg transition-all duration-200 border border-transparent group relative"
          [class.gap-3]="shouldShowText()"
          [class.justify-center]="!shouldShowText()"
        >
          <fa-icon [icon]="faGasPump" class="text-lg flex-shrink-0"></fa-icon>
          <span
            class="font-medium transition-opacity duration-300"
            [class.opacity-0]="!shouldShowText()"
            [class.sr-only]="!shouldShowText()"
            >Station Management</span
          >
          <!-- Tooltip for minimized state -->
          <div
            class="absolute left-full ml-2 px-2 py-1 bg-slate-900 border border-slate-600 text-white text-sm rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10"
            [class.hidden]="shouldShowText()"
          >
            Station Management
          </div>
        </a>

        <!-- Analytics -->
        <a
          routerLink="/analytics"
          routerLinkActive="bg-blue-600/20 text-blue-300 border-blue-500/30"
          class="flex items-center px-3 py-2.5 text-slate-300 hover:text-white hover:bg-slate-700/50 rounded-lg transition-all duration-200 border border-transparent group relative"
          [class.gap-3]="shouldShowText()"
          [class.justify-center]="!shouldShowText()"
        >
          <fa-icon [icon]="faChartLine" class="text-lg flex-shrink-0"></fa-icon>
          <span
            class="font-medium transition-opacity duration-300"
            [class.opacity-0]="!shouldShowText()"
            [class.sr-only]="!shouldShowText()"
            >Analytics</span
          >
          <!-- Tooltip for minimized state -->
          <div
            class="absolute left-full ml-2 px-2 py-1 bg-slate-900 border border-slate-600 text-white text-sm rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10"
            [class.hidden]="shouldShowText()"
          >
            Analytics
          </div>
        </a>

        <!-- Settings -->
        <a
          routerLink="/settings"
          routerLinkActive="bg-blue-600/20 text-blue-300 border-blue-500/30"
          class="flex items-center px-3 py-2.5 text-slate-300 hover:text-white hover:bg-slate-700/50 rounded-lg transition-all duration-200 border border-transparent group relative"
          [class.gap-3]="shouldShowText()"
          [class.justify-center]="!shouldShowText()"
        >
          <fa-icon [icon]="faCog" class="text-lg flex-shrink-0"></fa-icon>
          <span
            class="font-medium transition-opacity duration-300"
            [class.opacity-0]="!shouldShowText()"
            [class.sr-only]="!shouldShowText()"
            >Settings</span
          >
          <!-- Tooltip for minimized state -->
          <div
            class="absolute left-full ml-2 px-2 py-1 bg-slate-900 border border-slate-600 text-white text-sm rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10"
            [class.hidden]="shouldShowText()"
          >
            Settings
          </div>
        </a>
      </div>
    </nav>

    <!-- Logout -->
    <div class="p-4 border-t border-slate-700/50">
      <button
        (click)="logout()"
        class="flex items-center w-full px-3 py-2.5 text-slate-300 hover:text-white hover:bg-red-600/20 rounded-lg transition-all duration-200 group relative"
        [class.gap-3]="shouldShowText()"
        [class.justify-center]="!shouldShowText()"
      >
        <fa-icon [icon]="faSignOutAlt" class="text-lg flex-shrink-0"></fa-icon>
        <span
          class="font-medium transition-opacity duration-300"
          [class.opacity-0]="!shouldShowText()"
          [class.sr-only]="!shouldShowText()"
          >Logout</span
        >
        <!-- Tooltip for minimized state -->
        <div
          class="absolute left-full ml-2 px-2 py-1 bg-slate-900 border border-slate-600 text-white text-sm rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none z-10"
          [class.hidden]="shouldShowText()"
        >
          Logout
        </div>
      </button>
    </div>
  </div>

  <!-- Mobile Sidebar Overlay -->
  <div
    *ngIf="isMobileSidebarOpen()"
    class="fixed inset-0 bg-black/50 z-40 lg:hidden"
    (click)="closeMobileSidebar()"
  ></div>

  <!-- Mobile Sidebar -->
  <div
    class="fixed top-0 left-0 h-full w-64 bg-gradient-to-b from-slate-800 to-slate-900 border-r border-slate-700/50 shadow-xl transform transition-transform duration-300 z-50 lg:hidden"
    [class.translate-x-0]="isMobileSidebarOpen()"
    [class.-translate-x-full]="!isMobileSidebarOpen()"
  >
    <!-- Mobile Header -->
    <div
      class="flex items-center justify-between h-16 px-4 bg-gradient-to-r from-blue-600 to-blue-700 border-b border-blue-500/30"
    >
      <div class="flex items-center gap-3">
        <div class="w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center">
          <fa-icon [icon]="faGasPump" class="text-white"></fa-icon>
        </div>
        <span class="text-xl font-bold text-white">PetroHub</span>
      </div>
      <button
        (click)="closeMobileSidebar()"
        class="p-1.5 text-white/80 hover:text-white hover:bg-white/10 rounded-lg transition-colors"
      >
        <fa-icon [icon]="faTimes"></fa-icon>
      </button>
    </div>

    <!-- Mobile User Profile -->
    <div class="p-4 border-b border-slate-700/50">
      <div class="flex items-center gap-3">
        <div class="w-10 h-10 bg-blue-600 rounded-full flex items-center justify-center">
          <fa-icon [icon]="faUser" class="text-white"></fa-icon>
        </div>
        <div class="min-w-0">
          <p class="text-white font-medium truncate">Admin User</p>
          <p class="text-slate-400 text-sm truncate">admin&#64;petrohub.com</p>
        </div>
      </div>
    </div>

    <!-- Mobile Navigation -->
    <nav class="flex-1 p-4">
      <div class="space-y-2">
        <a
          routerLink="/dashboard"
          routerLinkActive="bg-blue-600/20 text-blue-300 border-blue-500/30"
          class="flex items-center gap-3 px-3 py-2.5 text-slate-300 hover:text-white hover:bg-slate-700/50 rounded-lg transition-all duration-200 border border-transparent"
          (click)="closeMobileSidebar()"
        >
          <fa-icon [icon]="faHome" class="text-lg"></fa-icon>
          <span class="font-medium">Dashboard</span>
        </a>
        <a
          routerLink="/stations"
          routerLinkActive="bg-blue-600/20 text-blue-300 border-blue-500/30"
          class="flex items-center gap-3 px-3 py-2.5 text-slate-300 hover:text-white hover:bg-slate-700/50 rounded-lg transition-all duration-200 border border-transparent"
          (click)="closeMobileSidebar()"
        >
          <fa-icon [icon]="faGasPump" class="text-lg"></fa-icon>
          <span class="font-medium">Station Management</span>
        </a>
        <a
          routerLink="/analytics"
          routerLinkActive="bg-blue-600/20 text-blue-300 border-blue-500/30"
          class="flex items-center gap-3 px-3 py-2.5 text-slate-300 hover:text-white hover:bg-slate-700/50 rounded-lg transition-all duration-200 border border-transparent"
          (click)="closeMobileSidebar()"
        >
          <fa-icon [icon]="faChartLine" class="text-lg"></fa-icon>
          <span class="font-medium">Analytics</span>
        </a>
        <a
          routerLink="/settings"
          routerLinkActive="bg-blue-600/20 text-blue-300 border-blue-500/30"
          class="flex items-center gap-3 px-3 py-2.5 text-slate-300 hover:text-white hover:bg-slate-700/50 rounded-lg transition-all duration-200 border border-transparent"
          (click)="closeMobileSidebar()"
        >
          <fa-icon [icon]="faCog" class="text-lg"></fa-icon>
          <span class="font-medium">Settings</span>
        </a>
      </div>
    </nav>

    <!-- Mobile Logout -->
    <div class="p-4 border-t border-slate-700/50">
      <button
        (click)="logout()"
        class="flex items-center gap-3 w-full px-3 py-2.5 text-slate-300 hover:text-white hover:bg-red-600/20 rounded-lg transition-all duration-200"
      >
        <fa-icon [icon]="faSignOutAlt" class="text-lg"></fa-icon>
        <span class="font-medium">Logout</span>
      </button>
    </div>
  </div>

  <!-- Main Content -->
  <div
    class="transition-all duration-300"
    [class.ml-64]="!isSidebarMinimized()"
    [class.ml-16]="isSidebarMinimized()"
    [class.ml-0]="true"
    [class.lg:ml-64]="!isSidebarMinimized()"
    [class.lg:ml-16]="isSidebarMinimized()"
    (click)="onMainContentClick()"
  >
    <!-- Top Header -->
    <header class="bg-white border-b border-gray-200 h-16 flex items-center justify-between px-6">
      <!-- Mobile Menu Button -->
      <button
        (click)="toggleMobileSidebar()"
        class="p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors lg:hidden"
      >
        <fa-icon [icon]="faBars"></fa-icon>
      </button>

      <!-- Header Title -->
      <div class="flex-1 ml-4 lg:ml-0">
        <h1 class="text-xl font-semibold text-gray-900">Dashboard</h1>
      </div>

      <!-- Header Actions -->
      <div class="flex items-center gap-4">
        <!-- Search -->
        <button class="p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors">
          <fa-icon [icon]="faSearch"></fa-icon>
        </button>

        <!-- Notifications -->
        <button class="p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors">
          <fa-icon [icon]="faBell"></fa-icon>
        </button>

        <!-- User Menu -->
        <div class="flex items-center gap-2">
          <div class="w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center">
            <fa-icon [icon]="faUser" class="text-white text-sm"></fa-icon>
          </div>
        </div>
      </div>
    </header>

    <!-- Page Content -->
    <main class="flex-1">
      <router-outlet></router-outlet>
    </main>
  </div>
</div>
